---
layout: post
title: "Impala"
---

### Impala
* Business intelligent analytics
* An MPP database, strength on multi-user

### Design
* Each node is able to accept and execute queries
* All nodes' system catalogs are up to date
* Coordination and synchronization cluster-wide metadata
* Does not support `UPDATE or DELETE`, only supports bulk insertions
    * due to HDFS feature
* avoid synchronous RPCs wherever possible on the critical path of any query
* pub-sub service: statestore
    * **push** updates to all interested parties, e.g., metadata changes to all subscribers
* construct a bloom filter to implement a simple version of a semi-join

#### Statestore
* topics: arrays of (key, value, version) triplets
    * persistent throught the lifetime of the statestore
        * not persisted across service restarts
* need registration
    * send delta changes every 2s
    * if ping time-out need re-register
    * failed subscriber would be removed


### Resource/Workload management
* YARN is centralized scheduling
    * decision is made with full knowledge of cluster state
    * latency is too high
* Impala needs to handle thousands of queries per second
    * New complementary but independent admission control: allow users to control their workloads without centralized decision-making
    * A service between Impala and YARN: resource caching, gang scheduling, incremental allocation changes
